<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/styles.css">
    <title> Your Cart </title>
</head>
<body id = 'wrapper'>
    <%- include('partials/header.ejs') %>
    <div class = 'content-div'>
        <h4> Your Purchases </h4>
        <div id = 'purchases-items-div'>
            <!-- Here it is that the cart items are rendered -->
            <% if (noRender) { %>
                <div class = "column-centered-div">
                    <p> Ooops... </p>
                    <p> It seems you haven't purchased anything yet </p>
                    <p> Why don't you checkout our awesome products ? </p>
                    <button class = "btn btn-success" onclick = "goToHome()"> Go to Store </button>
                </div>
            <% } else { %>
                <div>
                    <% for (let i = 0; i < purchases.length; i++) { %>
                    <div class = 'purchase-div'>
                        <h6> <%= purchases[i].creationDate %> </h6>
                        <% let total = 0; %>
                        <% for (let j = 0; j < purchases[i].items.length; j++) { %>
                            <p> <%= purchases[i].items[j].name %>, <%= purchases[i].items[j].quantity %> x <%= purchases[i].items[j].price %> USD</p>
                            <% total += purchases[i].items[j].quantity * purchases[i].items[j].price %>
                        <% } %>
                        <h5> Total: <%= total %> USD </h5>
                    </div> 
                    <% } %>
                </div>
            <% } %>
        </div>
    </div>
                <%- include('partials/footer.ejs') %>
</body>
    <script src="../../js/header.js"></script>
</html>